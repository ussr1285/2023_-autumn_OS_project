# 운영체제 프로젝트 (2)

## 프로그램 설명
통조림을 제조하는 공장을 위한 프로그램입니다. (가상의) 통조림 제조 설비와 직접 연결 된 서버 프로그램을 가동 시킨 후, 인터페이스 역할을 하는 클라이언트 프로그램으로 공장 설비 가동을 시작하거나, 현재까지 생산된 통조림을 확인하거나, 가동을 중단시킬 수 있습니다.
허나 각각의 여러 제조 설비들을 한 프로세스(서버 프로그램) 안에서 쓰레딩을 활용하여 관리하는데, 이 과정에서 발생할 수도 있는 문제를 보여주고, 동기화로 해결하는 것을 보여드리겠습니다.
코드 실행 방법을 먼저 보여드린 후에, 프로그램 상세 정보를 소개하겠습니다.


## 코드 실행 방법 & 프로그램 사용 방법
먼저 실행할 수 있는 server 프로그램과 client 프로그램을 만들기 위해 컴파일을 합니다.
```
make
```

이후 server 프로그램을 먼저 동작시킵니다,
```
./server
```

이후 client 프로그램을 동작시킵니다.
```
./client
```

client 프로그램에서 통조림 음식 멸균기(Autoclave)의 개수와, 통조림 포장기의 개수를 입력하는 상호작용이 차례대로 나옵니다. 정수형으로 입력해주시면 됩니다.
```
가동할 통조림 음식 멸균기의 개수를 입력해주세요: 
가동할 통조림 포장기의 개수를 입력해주세요: 
```

가동할 기계 개수를 입력해주면 Foodcan factory running now. 라는 문구가 나오며, 서버가 기계들을 관리하는 쓰레드들을 가동시키면서 통조림 생산이 시작됩니다.
이후 a, b, c 중에 하나를 입력하여 서버 프로그램을 제어할 수 있습니다.
a를 입력하면 아까 입력했던 가동 중인 기계 갯수가 확인됩니다.
b를 입력하면 현재까지 생산된 통조림 수를 확인할 수 있습니다.
c를 입력하면 생산을 관리하던 서버 프로그램과 클라이언트 프로그램을 중단시킵니다.
```
Foodcan factory running now.
a. 현재 가동 중인 기계 확인.
b. 현재까지 생산된 통조림 수 확인.
c. 기계 동작을 중지.
명령:
```

## 프로그램 상세 설명
### 클라이언트 / 사용자 인터페이스 프로그램 (client.c)
아래 명령들이 가능하며, 실질적인 작동은 모두 서버에서 처리합니다.
대표적인 수행 명령으로는 다음과 같습니다.
- 조리 기계 수 & 포장 기계 수 입력 및 시작.
- 현재 작동 중인 조리 기계 수 & 포장 기계 수 확인.
- 현재까지 생산된 통조림 재고 확인.
- 중지.

### 기계 관리용 서버 프로그램 (factoryManageServer.c)
- 클라이언트로부터 입력된 기계 수 만큼 각각의 생산 쓰레드가 생성되어 동작합니다.
- 프로그램이 종료할 때 아까의 생산 기계를 관리하던 쓰레드들도 같은 프로세스이므로 같이 종료됩니다.
#### 쓰레드가 수행하는 업무 소개.
**음식 멸균 (void* foodProducer(void* arg))**
    - 통조림 재료 통조림 가열하기. (Producer/Consumer 중 Produce 수행.)
**통조림 포장(void* makeFoodCan(void* arg))**
    - 재료 채우기. (Producer/Consumer 중 Consume 수행.)
    - 통조림 포장.
    - 하나의 통조림이 완성되면 기존 재고 수에 방금 만든 통조림 하나를 추가한다. (Read & Write)




