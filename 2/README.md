# 운영체제 프로젝트 (2)
이번 운영체제 프로젝트는 Producer/Consumer와 Reader/Writer 모델을 기반으로 한 각자 생각하는 프로그램을 제작하고, 동기화 기능이 없을 때 race condition이 발생함을 확인하고, 이를 해결하기 위하여 동기화 기능을 추가하는 것입니다. 프로그램은 각자 창의적으로 개발하되, 부분적으로 가정하거나 시뮬레이션을 할 수 있으며, 창의적인 프로그램이 어려울 때는 교재에서 설명하는 Producer/Consumer와 Reader/Writer 모델을 그대로 제작합니다.

### 1. Producer/Consumer 프로그램
- 가. 먼저 동기화 (세마포 등) 기능 없이 프로그램을 작성하고 수행하시오.
- 나. 동기화 기능이 없을 때 어떠한 문제들이 발생하는지 프로그램 수행결과를 바탕으로 설명하시오. (만일 예상되는 문제가 발생되지 않을 경우, 이유를 설명하고 프로그램을 수정하여 문제를 발생시킴, 즉 race condition 이 발생하도록 함. 예를들면 read후 write 전에 context switching 이 발생하도록 CPU를 잠시 놓는다.(sleep등의 함수 이용))
- 다. 동기화 기능을 추가한 프로그램을 작성하여 문제를 해결하고 확인하시오.
동기화 이유
- 목적: 프로듀서(생산자)는 데이터를 생성하고 버퍼(공유 자원)에 넣는 반면, 컨슈머(소비자)는 이 버퍼에서 데이터를 가져가서 사용합니다.
- 주된 문제: 버퍼 관리입니다. 버퍼가 가득 찼을 때 프로듀서가 대기해야 하고, 버퍼가 비었을 때 컨슈머가 대기해야 합니다.
- 동기화: 프로듀서와 컨슈머 사이의 동기화는 주로 세마포어나 뮤텍스를 사용하여 버퍼에 대한 접근을 조절합니다.
- 사용 사례: 프로듀서와 컨슈머가 독립적으로 작동하며, 둘 사이의 작업 속도 차이를 버퍼를 통해 조절합니다. 이는 파일 입출력, 네트워크 통신 등에서 자주 볼 수 있습니다.

### 2. Reader/Writer 프로그램
- 가. 먼저 동기화 (세마포 등) 기능 없이 프로그램을 작성하고 수행하시오.
- 나. 동기화 기능이 없을 때 어떠한 문제들이 발생하는지 프로그램 수행 결과를 바탕으로 설명하시오. (만일 예상되는 race condition 문제가 발생되지 않을 경우, 이유를 설명하고
프로그램을 수정하여 문제를 발생시킴, 즉 race condition이 발생하도록 함)
- 다. 동기화 기능을 추가한 프로그램을 작성하여 문제를 해결하고 확인하시오
* producer, consumer, reader, writer 의 개수는 적당히 조절하며, 그 밖의 가정은 상식적인 수준에서 가능함
동기화 이유
- 목적: 하나 이상의 리더(읽기 작업자)가 동시에 데이터를 읽을 수 있지만, 라이터(쓰기 작업자)가 데이터를 쓸 때는 다른 어떤 리더나 라이터도 동시에 데이터에 접근할 수 없습니다.
- 주된 문제: 데이터 일관성입니다. 라이터가 쓰기 작업을 하는 동안 데이터는 변경되지 않아야 하며, 리더들은 동시에 읽기 작업을 할 수 있어야 합니다.
- 동기화: 리더와 라이터 사이의 동기화는 뮤텍스와 조건 변수를 사용하여 이루어집니다. 리더는 동시에 읽을 수 있지만, 라이터가 쓰는 동안은 대기해야 합니다.
- 사용 사례: 데이터베이스 시스템, 파일 시스템 등에서 많이 사용됩니다. 여기서 중요한 것은 데이터의 일관성과 무결성을 유지하는 것입니다.

동기화 결론
Producer/Consumer: 버퍼를 중심으로 한 데이터의 생성과 소비에 초점을 맞춥니다.
Reader/Writer: 데이터의 동시 읽기와 독점적 쓰기에 초점을 맞춥니다.
이 두 프로그램은 동시성 관리에 있어 다른 접근 방식을 요구하며, 각기 다른 유형의 애플리케이션에 적용됩니다.

## 프로그램 주제
통조림 공장
	P & C : 재료가 조리 완료되면 produce한다. 재료가 왔을 때 consume한다.
	R & W : 여러개의 기계(쓰레드)를 돌림으로써 생산되는 통조림 **재고 수**를 계산할 때 동기화 문제 발생할 것.

## 사용자 인터페이스 프로그램 (클라이언트)
아래 명령들은 모두 서버에서 처리한다.
- 조리 기계 수 입력.
- 포장 기계 수 입력.
- 시작.
- 중지.
- 출하.(보류)

## 실질적인 기계 관리 프로그램 (서버)
- 클라이언트로부터 입력된 기계 수 만큼 각각의 생산 쓰레드가 생성되어 동작한다.
- 프로그램이 종료하면 아까의 생산 쓰레드들도 종료된다.
- 출하 명령을 하면 재고들은 0으로 초기화 된다. (R&W 동기화)
- 프로그램 꺼지면 다른 것들도 종료됨

## 기계적인 생산 프로그램 (서버 하위 쓰레드)
### 음식 조리 및 멸균
- 통조림 재료 조리하기. (P&C 중 Produce 동기화)
- 통조림에 재료 채우기. (P&C 중 Consume 동기화)
- 통조림 가열.
### 통조림 포장
- 통조림 포장.
- 하나의 통조림이 완성되면 기존 재고 수에 현재 만든 재고를 추가하기 위하여, Read & Write를 한다. (R&W 동기화)



